<!DOCTYPE HTML>
<html> 
<head> 
	<meta charset="utf-8"> 
	<title>Ajax API by snandy</title>
	<script src="../io.src.js"></script>
	<script src="lib/selector.js"></script>
</head> 
<body>
<input type="button" value="Get Name 1" onclick="clk1()"/>
<input type="button" value="Get Name 2" onclick="clk2()"/>
<input type="button" value="JSONP" onclick="clk3()"/>
<br/>
<input type="file" multiple />

<script type="text/javascript">

function clk1() {
	// IO.json('http://localhost:8081', {
		// data: {key: [1, 2, 3]},
		// type: 'text',
		// success: function(str) {
			// console.log(str)
		// }
	// })
	IO.jsonp('http://localhost:8081')
}
function clk2() {
	IO.post({
		url: 'http://zgit/io/test/ajax.html',
		// url: 'http://localhost:8081/web/servlet/Cors',
		data: {name:'backus', age:99},
		success: function(data) {
			console.log(data)
		}
	})
}
function clk3() {
	IO.jsonp({
		url: 'http://zgit/io/test/ajax.html',
		// url: 'http://localhost:8081/web/servlet/Cors',
		data: {name:'backus', age:99},
		success: function(data) {
			console.log(data)
		}
	})
}

var url = 'http://localhost:8081/web/servlet/Cors'
$('input[type=file]')[0].onchange = function() {
	var files = this.files;
	if (files.length) {
		var xhr = new XMLHttpRequest()
		xhr.withCredentials = true
		xhr.open('POST', url)
		xhr.send(files[0])
	}
}

function test(opt) {
	if ( opt.length ) {
		opt = {success: opt}
	}
	console.log(opt)
}
</script>
</body>
</html>

